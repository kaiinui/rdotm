# rdotm

[![Build Status](https://travis-ci.org/ksoichiro/rdotm.svg?branch=master)](https://travis-ci.org/ksoichiro/rdotm)

rdotm(R.m) is the Objective-C resource definition generator like Android app's `R.java`.

## Features

### Color reference method generation

#### What is it?

A tool to generate code that makes you possible to access color resources via method:  
`<color name="title">#FF0099CC</string>` -> `[R color_title]`

Hex color expressions are converted when executing this tool.  
(Generated colors are written using `[UIColor colorWithRed:green:blue:alpha]`.)

So if you have a utility method like `[UIColor colorWithHexString]` to convert hex strings on runtime, your app could be a little bit faster.

### String reference method generation

#### What is it?

A tool to generate code that makes you possible to access string resources via method:  
`<string name="something">anything</string>` -> `[R string_something]`

#### Why should I use Android XML format?

Because you can share resource files with Android app project.

#### Why not NSLocalizedString?

You can use `Localizable.strings` and `NSLocalizedString`, but it has a problem that even if you have some typos you will not be noticed while compiling them.

For example, if you define a string like this:

```
"something"="anything";
```

then you can refer this string with the following code:

```
// OK, this will be @"anything"
NSLocalizedString(@"something", nil)
```

but you may mistype it:

```
// This is typo, but it won't cause compile error
NSLocalizedString(@"s0mething", nil)
```

This means that you must run the app manually and detect this bug with your eye, or write test code to detect it.

## Install

[Get the latest release binary](https://github.com/ksoichiro/rdotm/releases/latest) or install with golang environment.

```sh
$ go get github.com/ksoichiro/rdotm
```

## Usage

### Basic

```sh
$ rdotm -res /path/to/res -out /path/to/output/dir
```

`res` directory should be the Android app's resource structure.  
Example:

```
res
└── values
    ├── colors.xml
    └── strings.xml
```

### Options

| Option | Default | Description |
| ------ | ------- | ----------- |
| `-class` | R | Class name to overwrite default value(R). Optional. |
| `-clean` | false | Clean output directory before execution. |

## Example

### Input file

res/values/strings.xml

```xml
<resources>
    <string name="title_main">Main</string>
    <string name="label_next">Next</string>
</resources>
```

res/values/colors.xml

```xml
<resources>
    <color name="default_text">#990099cc</color>
</resources>
```

### Output file

R.h

```objc
// DO NOT EDIT.
// This file is automatically generated by rdotm tool.
// https://github.com/ksoichiro/rdotm

#import <UIKit/UIKit.h>

@interface R : NSObject

+ (NSString *)string_title_main;
+ (NSString *)string_label_next;
+ (UIColor *)color_default_text;

@end
```

R.m

```objc
// DO NOT EDIT.
// This file is automatically generated by rdotm tool.
// https://github.com/ksoichiro/rdotm

#import "R.h"

@implementation R

+ (NSString *)string_title_main { return @"Main"; }
+ (NSString *)string_label_next { return @"Next"; }
+ (UIColor *)color_default_text { return [UIColor colorWithRed:0/255.0 green:153/255.0 blue:204/255.0 alpha:153/255.0]; }

@end
```

## License

Copyright (c) 2014 Soichiro Kashima  
Licensed under MIT license.  
See the bundled [LICENSE](https://github.com/ksoichiro/rdotm/blob/master/LICENSE) file for details.
